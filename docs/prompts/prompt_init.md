# 身份

你是一位熟悉 Flutter 框架，也是一位開發過 Web、Android、iOS 的資深開發者。  
在提供建議的時候，你會依據 SOLID 設計原則，並依據現有專案架構提供合適的開發建議與規劃。
在回應時，你會以臺灣繁體中文回答，並會注意使用臺灣慣用的技術名稱，像是 enum 是列舉不是枚舉...等

# 專案功能

## 1. 專案說明

這個應用程式會根據不同的專案而有其多個任務內容，這些任務則會歸屬於專案中

### 1.1 開發環境

- 使用 Flutter 框架
    - 使用 provider 做為狀態管理
    - 使用 go_router 做為路徑管理
    - 使用 flutter_secure_storage 存放登入 token
- 使用 Firebase 服務
    - 登入使用 Firebase：Authentication
    - 資料面分別會用到
        - Remote Config
        - Realtime Database
        - Firestore，分兩個 Collections

#### 1.2 關於資料

- 建立一個名稱為： `2025 花蓮馬太鞍溪堰塞湖災害` 的專案
- 因為現在沒有其他專案，所以先接下來的實作請全部以這個專案為主
- 資料基本設計如下：
    - Remote Config
        - 留存版本名稱：versionName
        - 更新時間：modifyTime
    - Realtime Database
        - 紀錄專案名稱與 ID
    - Firestore，分兩個 Collections
        - users，記錄使用者資訊
            - document：該使用者的 User UID
            - Field：見下方 **2.2 關於帳號**
        - 專案 ID，對應 Realtime Database 的 ID
            - document：該任務 ID
            - Field：見下方 **2.1 關於任務**

## 2. 需要資料欄位

### 2.1 關於任務

- 任務名稱，純文字，30 字
- 任務內容，純文字，500 字
- 地址，純文字，100 字
- 任務性質，選項，最多 10 字，使用者可自行新增，預設如下
    - 勞力任務
    - 補給品需求
    - 發放資源
- 任務狀態
    - 草稿 // 尚未發布
    - 發布 // 任務公開
    - 認領 // 有人承接此任務
    - 已完成 // 承接人已完成任務
    - 放棄 // 承接人放棄任務
    - 取消 // 發布人取消該任務
- 任務發布人顯示名稱
- 任務發布時間：格式 `YYYY/mm/dd MM:DD`
- 任務取消時間：格式 `YYYY/mm/dd MM:DD`
- 任務編輯時間：格式 `YYYY/mm/dd MM:DD`
- 任務承接人顯示名稱
- 任務承接時間：格式 `YYYY/mm/dd MM:DD`
- 任務完成時間：格式 `YYYY/mm/dd MM:DD`
- 任務變更時間：用於任務承接、完成、取消，這三種狀態的變更時間

### 2.2 關於帳號

- 使用 Google 登入
- email
- 聯絡資訊：純文字，200 字
- 聯絡電話
- 顯示名稱：純文字，100 字

## 3. 功能畫面

### 3.1 首頁

一進到應用程式看到的清單畫面，有三個任務類型分頁，分別顯示對應的任務清單。
以及使用者可以發布任務跟看到自己的資訊的功能

#### 畫面顯示

- 以 tab 顯示，最多三個分頁
    - 分頁
        - 任務，尚未有人承接的任務
        - 執行中，已有人承接
        - 完成，已經完成
    - 如果三個分都沒有資料，請顯示沒有資料
- 以 Card 顯示任務清單
- 顯示資料
    - 任務名稱
    - 發布人
    - 發布時間
    - 狀態，顯示任務狀態標籤
        - 發布：發布尚無人接，不用顯示。對應狀態：發布、放棄
        - 認領：有人接下來該任務，藍色。對應狀態：認領
        - 已完成：已有人接下來該任務，綠色。對應狀態：已完成
    - 如果有人認領或是任務切換成已完成，則多顯示「狀態變更時間」

#### 功能按鈕

##### Floating button：新增任務

- 如果未登入，進入登入畫面，登入成功，直接進入新增任務畫面

##### AppBar actions

###### 未登入

- 登入：圖示按鈕，登入成功後，返回首頁

###### 已登入

- 使用者資料：圖示按鈕，進入使用者資料頁

### 3.2 任務資料頁

任務的詳細資料頁，只要是在 `發布/認領/放棄/已完成` 等狀態下都能瀏覽

#### 頁面資料，可划動

- 任務名稱
- 任務內容
- 地址，可以點將切換到 Google Map
- 聯絡資訊
- 聯絡電話，可以開啟電話
- 任務狀態區塊，以 Card 顯示。
    - 任務狀態，如果
    - 發布人顯示名稱
    - 發布時間
    - 編輯時間：如果有編輯時間或是取消任務時才顯示
- 承接人狀態，以 Card 顯示。如果尚未承接，或是放棄任務則不顯示
    - 承接人顯示名稱
    - 承接時間
    - 完成時間，如果已經完成才顯示

#### 頁面置底按鈕

- 如果使用者是發布人
    - **編輯** 按鈕
- 其他使用者
    - **承接** 按鈕，如果該任務已被認領，按鈕不可點選

#### AppBar 的 actions

- 如果未登入，顯示登入按鈕，登入後返回此任務資料頁
- 如果已登入
    - 發布人，顯示取消任務按鈕，圖示按鈕，要跳確認 Dialog 避免使用者誤觸
    - 承接人，顯示放棄任務按鈕，圖示按鈕，要跳確認 Dialog 避免使用者誤觸

### 3.3 發布任務

發布任務與編輯任務的表單輸入資料頁

#### 編輯畫面

- 任務名稱
    - Hint：請輸入任務名稱
    - Label：任務名稱
    - 單行文字
    - 顯示剩餘可填字數
    - 必填
- 任務內容
    - Hint：請輸入本次任務的需求
    - Label：任務內容
    - 多行文字
    - 顯示剩餘可填字數
    - 必填
- 地點
    - Hint：請輸入本次任務的地點
    - Label：地點
    - 單行文字
    - 可為空
- 聯絡人
    - Hint：請輸入本次任務的聯絡人
    - Label：聯絡人
    - 單行文字
    - 必填
    - 自動帶入聯絡人顯示名稱
- 聯絡資訊，單行文字
    - Hint：請輸入本次任務的聯絡人的資訊，如果為空則前端則不會顯示
    - Label：聯絡資訊
    - 單行文字
    - 可為空
    - 自動帶入聯絡人聯絡資訊
- 聯絡電話
    - Hint：請輸入本次任務的聯絡人的電話，如果為空則前端則不會顯示
    - Label：聯絡電話
    - 單行文字
    - 可為空
    - 自動帶入聯絡人聯絡電話
- 任務性質，下拉選單
    - 選項：
        - 請選擇
        - 已存在的任務性質
        - 其他，另外於下方顯示文字輸入框
            - Hint：請輸入本次任務的需求
            - Label：任務內容
            - 必填
            - 最多 10 個字
            - 顯示剩餘可填字數
    - 必填

#### 頁面置底按鈕

- 發布
    - 要跳確認 Dialog 避免使用者誤觸
    - 確認儲存的話，將資料存入，並狀態設定為**發布**
- 儲存草稿
    - 儲存資料，將狀態設定為**草稿**
    - 如果任務性質為**其他**，則要新增該輸入框的內容進任務性質中

#### AppBar 的 actions

- 取消，圖示按鈕，要跳確認 Dialog 避免使用者誤觸

### 3.4 使用者資料頁

#### AppBar actions

- 編輯，圖示按鈕，進入個人資料編輯頁
- 登出，清除存在本地端的資料

#### 使用者資料畫面

- 使用者資料
    - 登入帳號
    - email
    - 顯示名稱
    - 聯絡資訊
    - 聯絡電話
- **發布任務** 按鈕
    - 如果有屬於這個登入者的發布的任務才顯示
    - 進入發布任務清單畫面
- **承接任務** 按鈕
    - 如果有屬於這個登入者的承接的任務才顯示
    - 進入承接任務清單畫面

#### 使用者編輯畫面

- 可以編輯欄位
    - 顯示名稱
        - Hint：請輸入要顯示於外的名稱
        - Label：顯示名稱
        - 單行文字
        - 必填
    - 聯絡資訊
        - Hint：可輸入任何聯絡電話外的資訊，比方說 LINE 的 ID
        - Label：聯絡資訊
        - 單行文字
        - 可為空
    - 聯絡電話
        - Hint：請輸入聯絡電話
        - Label：聯絡電話
        - 單行文字
        - 可為空
- 置底按鈕
    - 儲存：將資料存於資料庫中

### 3.5 登入

- 只要顯示一個 Google 登入按鈕
- 如果該 UID 不存在於資料庫中，則強迫使用者一定要先填完使用者資料，即顯示 **使用者編輯畫面**

## 風格

- 使用 material design
- 請採用明亮、活潑的風格色調

#######################################
以上為整個專案的目標與需求，請你依照理解，生成更為完整的規格書。
請分兩個階段撰寫

1. 畫面與資料物件，先以假資料取代
    - 請將規格書寫於 `docs/specs/1-supply-ui.md`
2. 整合 Firebase，這個我們會移到 Firebase Studio 進行
    - 請將規格書寫於 `docs/specs/1-supply-firebase.md`

這兩份規格書都會是未來開發的依據，所以請你撰寫完後，更新 `GEMINI.md`